apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    cert-manager.io/inject-ca-from: kcp-system/klm-serving-cert
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: kymas.operator.kyma-project.io
spec:
  group: operator.kyma-project.io
  names:
    kind: Kyma
    listKind: KymaList
    plural: kymas
    singular: kyma
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    deprecated: true
    deprecationWarning: kyma-project.io/v1beta1 Kyma is deprecated. Use v1beta2 instead.
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: Kyma is the Schema for the kymas API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: KymaSpec defines the desired state of Kyma.
            properties:
              channel:
                description: Channel specifies the desired Channel of the Installation,
                  usually targeting different module versions.
                maxLength: 32
                minLength: 3
                pattern: ^[a-z]+$
                type: string
              modules:
                description: Modules specifies the list of modules to be installed
                items:
                  description: Module defines the components to be installed.
                  properties:
                    channel:
                      description: |-
                        Channel is the desired channel of the Module. If this changes or is set, it will be used to resolve a new
                        ModuleTemplate based on the new resolved resources.
                      maxLength: 32
                      minLength: 3
                      pattern: ^[a-z]+$
                      type: string
                    controller:
                      description: |-
                        ControllerName is able to set the controller used for reconciliation of the module. It can be used
                        together with Cache Configuration on the Operator responsible for the templated Modules to split
                        workload.
                      type: string
                    customResourcePolicy:
                      default: CreateAndDelete
                      description: |-
                        CustomResourcePolicy determines how a ModuleTemplate should be parsed. When CustomResourcePolicy is set to
                        CustomResourcePolicyCreateAndDelete, the Manifest will receive instructions to create it on installation with
                        the default values provided in ModuleTemplate, and to remove it when the module or Kyma is deleted.
                      enum:
                      - CreateAndDelete
                      - Ignore
                      type: string
                    name:
                      description: |-
                        Name is a unique identifier of the module.
                        It is used to resolve a ModuleTemplate for creating a set of resources on the cluster.


                        Name can be one of 3 kinds:
                        - The ModuleName label value of the module-template, e.g. operator.kyma-project.io/module-name=my-module
                        - The Name or Namespace/Name of a ModuleTemplate, e.g. my-moduletemplate or kyma-system/my-moduletemplate
                        - The FQDN, e.g. kyma-project.io/module/my-module as located in .spec.descriptor.component.name
                      type: string
                    remoteModuleTemplateRef:
                      description: |-
                        RemoteModuleTemplateRef is deprecated and will no longer have any functionality.
                        It will be removed in the upcoming API version.
                      type: string
                  required:
                  - name
                  type: object
                type: array
              sync:
                description: Active Synchronization Settings
                properties:
                  enabled:
                    default: false
                    description: |-
                      Enabled set to true will look up a kubeconfig for the remote cluster based on the strategy
                      and synchronize its state there.
                    type: boolean
                  moduleCatalog:
                    default: true
                    description: |-
                      ModuleCatalog set to true will cause a copy of all ModuleTemplate in the cluster
                      to be synchronized for discovery purposes
                    type: boolean
                  namespace:
                    description: |-
                      The target namespace, if empty the namespace is reflected from the control plane
                      Note that cleanup is currently not supported if you are switching the namespace, so you will
                      manually need to clean up old synchronized Kymas
                    type: string
                  noModuleCopy:
                    default: true
                    description: |-
                      NoModuleCopy set to true will cause the remote Kyma to be initialized without copying over the
                      module spec of the control plane into the SKR
                    type: boolean
                  strategy:
                    default: secret
                    description: Strategy determines the way to look up the remotely
                      synced kubeconfig, by default it is fetched from a secret
                    type: string
                type: object
            required:
            - channel
            type: object
          status:
            description: KymaStatus defines the observed state of Kyma
            properties:
              activeChannel:
                description: Active Channel
                type: string
              conditions:
                description: List of status conditions to indicate the status of a
                  ServiceInstance.
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource.\n---\nThis struct is intended for
                    direct use as an array at the field path .status.conditions.  For
                    example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                    observations of a foo's current state.\n\t    // Known .status.conditions.type
                    are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                    +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                    \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                    patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                    \   // other fields\n\t}"
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: |-
                        type of condition in CamelCase or in foo.example.com/CamelCase.
                        ---
                        Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                        useful (see .node.status.conditions), the ability to deconflict is important.
                        The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              lastOperation:
                description: LastOperation defines the last operation from the control-loop.
                properties:
                  lastUpdateTime:
                    format: date-time
                    type: string
                  operation:
                    type: string
                required:
                - operation
                type: object
              modules:
                description: Contains essential information about the current deployed
                  module
                items:
                  properties:
                    channel:
                      description: |-
                        Channel tracks the active Channel of the Module. In Case it changes, the new Channel will have caused
                        a new lookup to be necessary that maybe picks a different ModuleTemplate, which is why we need to reconcile.
                      type: string
                    fqdn:
                      description: |-
                        FQDN is the fully qualified domain name of the module.
                        In the ModuleTemplate it is located in .spec.descriptor.component.name of the ModuleTemplate
                        FQDN is used to calculate Namespace and Name of the Manifest for tracking.
                      type: string
                    manifest:
                      description: Manifest contains the Information of a related
                        Manifest
                      properties:
                        apiVersion:
                          description: |-
                            APIVersion defines the versioned schema of this representation of an object.
                            Servers should convert recognized schemas to the latest internal value, and
                            may reject unrecognized values.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                          type: string
                        kind:
                          description: |-
                            Kind is a string value representing the REST resource this object represents.
                            Servers may infer this from the endpoint the client submits requests to.
                            Cannot be updated.
                            In CamelCase.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        metadata:
                          description: |-
                            PartialMeta is a subset of ObjectMeta that contains relevant information to track an Object.
                            see https://github.com/kubernetes/apimachinery/blob/v0.26.1/pkg/apis/meta/v1/types.go#L111
                          properties:
                            generation:
                              description: |-
                                A sequence number representing a specific generation of the desired state.
                                Populated by the system. Read-only.
                              format: int64
                              type: integer
                            name:
                              description: |-
                                Name must be unique within a namespace. Is required when creating resources, although
                                some resources may allow a client to request the generation of an appropriate name
                                automatically. Name is primarily intended for creation idempotence and configuration
                                definition.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/identifiers#names
                              type: string
                            namespace:
                              description: |-
                                Namespace defines the space within which each name must be unique. An empty namespace is
                                equivalent to the "default" namespace, but "default" is the canonical representation.
                                Not all objects are required to be scoped to a namespace - the value of this field for
                                those objects will be empty.


                                Must be a DNS_LABEL.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/namespaces
                              type: string
                          type: object
                      type: object
                    message:
                      description: Message is a human-readable message indicating
                        details about the State.
                      type: string
                    name:
                      description: |-
                        Name defines the name of the Module in the Spec that the status is used for.
                        It can be any kind of Reference format supported by Module.Name.
                      type: string
                    resource:
                      description: Resource contains information about the created
                        module CR.
                      properties:
                        apiVersion:
                          description: |-
                            APIVersion defines the versioned schema of this representation of an object.
                            Servers should convert recognized schemas to the latest internal value, and
                            may reject unrecognized values.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                          type: string
                        kind:
                          description: |-
                            Kind is a string value representing the REST resource this object represents.
                            Servers may infer this from the endpoint the client submits requests to.
                            Cannot be updated.
                            In CamelCase.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        metadata:
                          description: |-
                            PartialMeta is a subset of ObjectMeta that contains relevant information to track an Object.
                            see https://github.com/kubernetes/apimachinery/blob/v0.26.1/pkg/apis/meta/v1/types.go#L111
                          properties:
                            generation:
                              description: |-
                                A sequence number representing a specific generation of the desired state.
                                Populated by the system. Read-only.
                              format: int64
                              type: integer
                            name:
                              description: |-
                                Name must be unique within a namespace. Is required when creating resources, although
                                some resources may allow a client to request the generation of an appropriate name
                                automatically. Name is primarily intended for creation idempotence and configuration
                                definition.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/identifiers#names
                              type: string
                            namespace:
                              description: |-
                                Namespace defines the space within which each name must be unique. An empty namespace is
                                equivalent to the "default" namespace, but "default" is the canonical representation.
                                Not all objects are required to be scoped to a namespace - the value of this field for
                                those objects will be empty.


                                Must be a DNS_LABEL.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/namespaces
                              type: string
                          type: object
                      type: object
                    state:
                      description: State of the Module in the currently tracked Generation
                      enum:
                      - Processing
                      - Deleting
                      - Ready
                      - Error
                      - ""
                      - Warning
                      type: string
                    template:
                      description: |-
                        It contains information about the last parsed ModuleTemplate in Context of the Installation.
                        This will update when Channel or the ModuleTemplate is changed.
                      properties:
                        apiVersion:
                          description: |-
                            APIVersion defines the versioned schema of this representation of an object.
                            Servers should convert recognized schemas to the latest internal value, and
                            may reject unrecognized values.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                          type: string
                        kind:
                          description: |-
                            Kind is a string value representing the REST resource this object represents.
                            Servers may infer this from the endpoint the client submits requests to.
                            Cannot be updated.
                            In CamelCase.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        metadata:
                          description: |-
                            PartialMeta is a subset of ObjectMeta that contains relevant information to track an Object.
                            see https://github.com/kubernetes/apimachinery/blob/v0.26.1/pkg/apis/meta/v1/types.go#L111
                          properties:
                            generation:
                              description: |-
                                A sequence number representing a specific generation of the desired state.
                                Populated by the system. Read-only.
                              format: int64
                              type: integer
                            name:
                              description: |-
                                Name must be unique within a namespace. Is required when creating resources, although
                                some resources may allow a client to request the generation of an appropriate name
                                automatically. Name is primarily intended for creation idempotence and configuration
                                definition.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/identifiers#names
                              type: string
                            namespace:
                              description: |-
                                Namespace defines the space within which each name must be unique. An empty namespace is
                                equivalent to the "default" namespace, but "default" is the canonical representation.
                                Not all objects are required to be scoped to a namespace - the value of this field for
                                those objects will be empty.


                                Must be a DNS_LABEL.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/namespaces
                              type: string
                          type: object
                      type: object
                    version:
                      description: Channel tracks the active Version of the Module.
                      type: string
                  required:
                  - name
                  - state
                  type: object
                type: array
              state:
                description: |-
                  State signifies current state of Kyma.
                  Value can be one of ("Ready", "Processing", "Error", "Deleting").
                enum:
                - Processing
                - Deleting
                - Ready
                - Error
                - ""
                - Warning
                type: string
            type: object
        type: object
    served: false
    storage: false
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta2
    schema:
      openAPIV3Schema:
        description: Kyma is the Schema for the kymas API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: KymaSpec defines the desired state of Kyma.
            properties:
              channel:
                description: Channel specifies the desired Channel of the Installation,
                  usually targeting different module versions.
                maxLength: 32
                minLength: 3
                pattern: ^[a-z]+$
                type: string
              modules:
                description: Modules specifies the list of modules to be installed
                items:
                  description: Module defines the components to be installed.
                  properties:
                    channel:
                      description: |-
                        Channel is the desired channel of the Module. If this changes or is set, it will be used to resolve a new
                        ModuleTemplate based on the new resolved resources.
                      maxLength: 32
                      minLength: 3
                      pattern: ^[a-z]+$
                      type: string
                    controller:
                      description: |-
                        ControllerName is able to set the controller used for reconciliation of the module. It can be used
                        together with Cache Configuration on the Operator responsible for the templated Modules to split
                        workload.
                      type: string
                    customResourcePolicy:
                      default: CreateAndDelete
                      description: |-
                        CustomResourcePolicy determines how a ModuleTemplate should be parsed. When CustomResourcePolicy is set to
                        CustomResourcePolicyCreateAndDelete, the Manifest will receive instructions to create it on installation with
                        the default values provided in ModuleTemplate, and to remove it when the module or Kyma is deleted.
                      enum:
                      - CreateAndDelete
                      - Ignore
                      type: string
                    name:
                      description: |-
                        Name is a unique identifier of the module.
                        It is used to resolve a ModuleTemplate for creating a set of resources on the cluster.


                        Name can be one of 3 kinds:
                        - The ModuleName label value of the module-template, e.g. operator.kyma-project.io/module-name=my-module
                        - The Name or Namespace/Name of a ModuleTemplate, e.g. my-moduletemplate or kyma-system/my-moduletemplate
                        - The FQDN, e.g. kyma-project.io/module/my-module as located in .spec.descriptor.component.name
                      type: string
                    remoteModuleTemplateRef:
                      description: |-
                        RemoteModuleTemplateRef is deprecated and will no longer have any functionality.
                        It will be removed in the upcoming API version.
                      type: string
                  required:
                  - name
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
            required:
            - channel
            type: object
          status:
            description: KymaStatus defines the observed state of Kyma
            properties:
              activeChannel:
                description: Active Channel
                type: string
              conditions:
                description: List of status conditions to indicate the status of a
                  ServiceInstance.
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource.\n---\nThis struct is intended for
                    direct use as an array at the field path .status.conditions.  For
                    example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                    observations of a foo's current state.\n\t    // Known .status.conditions.type
                    are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                    +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                    \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                    patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                    \   // other fields\n\t}"
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: |-
                        type of condition in CamelCase or in foo.example.com/CamelCase.
                        ---
                        Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                        useful (see .node.status.conditions), the ability to deconflict is important.
                        The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              lastOperation:
                description: LastOperation defines the last operation from the control-loop.
                properties:
                  lastUpdateTime:
                    format: date-time
                    type: string
                  operation:
                    type: string
                required:
                - operation
                type: object
              modules:
                description: Contains essential information about the current deployed
                  module
                items:
                  properties:
                    channel:
                      description: |-
                        Channel tracks the active Channel of the Module. In Case it changes, the new Channel will have caused
                        a new lookup to be necessary that maybe picks a different ModuleTemplate, which is why we need to reconcile.
                      type: string
                    fqdn:
                      description: |-
                        FQDN is the fully qualified domain name of the module.
                        In the ModuleTemplate it is located in .spec.descriptor.component.name of the ModuleTemplate
                        FQDN is used to calculate Namespace and Name of the Manifest for tracking.
                      type: string
                    manifest:
                      description: Manifest contains the Information of a related
                        Manifest
                      properties:
                        apiVersion:
                          description: |-
                            APIVersion defines the versioned schema of this representation of an object.
                            Servers should convert recognized schemas to the latest internal value, and
                            may reject unrecognized values.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                          type: string
                        kind:
                          description: |-
                            Kind is a string value representing the REST resource this object represents.
                            Servers may infer this from the endpoint the client submits requests to.
                            Cannot be updated.
                            In CamelCase.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        metadata:
                          description: |-
                            PartialMeta is a subset of ObjectMeta that contains relevant information to track an Object.
                            see https://github.com/kubernetes/apimachinery/blob/v0.26.1/pkg/apis/meta/v1/types.go#L111
                          properties:
                            generation:
                              description: |-
                                A sequence number representing a specific generation of the desired state.
                                Populated by the system. Read-only.
                              format: int64
                              type: integer
                            name:
                              description: |-
                                Name must be unique within a namespace. Is required when creating resources, although
                                some resources may allow a client to request the generation of an appropriate name
                                automatically. Name is primarily intended for creation idempotence and configuration
                                definition.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/identifiers#names
                              type: string
                            namespace:
                              description: |-
                                Namespace defines the space within which each name must be unique. An empty namespace is
                                equivalent to the "default" namespace, but "default" is the canonical representation.
                                Not all objects are required to be scoped to a namespace - the value of this field for
                                those objects will be empty.


                                Must be a DNS_LABEL.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/namespaces
                              type: string
                          type: object
                      type: object
                    message:
                      description: Message is a human-readable message indicating
                        details about the State.
                      type: string
                    name:
                      description: |-
                        Name defines the name of the Module in the Spec that the status is used for.
                        It can be any kind of Reference format supported by Module.Name.
                      type: string
                    resource:
                      description: Resource contains information about the created
                        module CR.
                      properties:
                        apiVersion:
                          description: |-
                            APIVersion defines the versioned schema of this representation of an object.
                            Servers should convert recognized schemas to the latest internal value, and
                            may reject unrecognized values.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                          type: string
                        kind:
                          description: |-
                            Kind is a string value representing the REST resource this object represents.
                            Servers may infer this from the endpoint the client submits requests to.
                            Cannot be updated.
                            In CamelCase.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        metadata:
                          description: |-
                            PartialMeta is a subset of ObjectMeta that contains relevant information to track an Object.
                            see https://github.com/kubernetes/apimachinery/blob/v0.26.1/pkg/apis/meta/v1/types.go#L111
                          properties:
                            generation:
                              description: |-
                                A sequence number representing a specific generation of the desired state.
                                Populated by the system. Read-only.
                              format: int64
                              type: integer
                            name:
                              description: |-
                                Name must be unique within a namespace. Is required when creating resources, although
                                some resources may allow a client to request the generation of an appropriate name
                                automatically. Name is primarily intended for creation idempotence and configuration
                                definition.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/identifiers#names
                              type: string
                            namespace:
                              description: |-
                                Namespace defines the space within which each name must be unique. An empty namespace is
                                equivalent to the "default" namespace, but "default" is the canonical representation.
                                Not all objects are required to be scoped to a namespace - the value of this field for
                                those objects will be empty.


                                Must be a DNS_LABEL.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/namespaces
                              type: string
                          type: object
                      type: object
                    state:
                      description: State of the Module in the currently tracked Generation
                      enum:
                      - Processing
                      - Deleting
                      - Ready
                      - Error
                      - ""
                      - Warning
                      type: string
                    template:
                      description: |-
                        It contains information about the last parsed ModuleTemplate in Context of the Installation.
                        This will update when Channel or the ModuleTemplate is changed.
                      properties:
                        apiVersion:
                          description: |-
                            APIVersion defines the versioned schema of this representation of an object.
                            Servers should convert recognized schemas to the latest internal value, and
                            may reject unrecognized values.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                          type: string
                        kind:
                          description: |-
                            Kind is a string value representing the REST resource this object represents.
                            Servers may infer this from the endpoint the client submits requests to.
                            Cannot be updated.
                            In CamelCase.
                            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                          type: string
                        metadata:
                          description: |-
                            PartialMeta is a subset of ObjectMeta that contains relevant information to track an Object.
                            see https://github.com/kubernetes/apimachinery/blob/v0.26.1/pkg/apis/meta/v1/types.go#L111
                          properties:
                            generation:
                              description: |-
                                A sequence number representing a specific generation of the desired state.
                                Populated by the system. Read-only.
                              format: int64
                              type: integer
                            name:
                              description: |-
                                Name must be unique within a namespace. Is required when creating resources, although
                                some resources may allow a client to request the generation of an appropriate name
                                automatically. Name is primarily intended for creation idempotence and configuration
                                definition.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/identifiers#names
                              type: string
                            namespace:
                              description: |-
                                Namespace defines the space within which each name must be unique. An empty namespace is
                                equivalent to the "default" namespace, but "default" is the canonical representation.
                                Not all objects are required to be scoped to a namespace - the value of this field for
                                those objects will be empty.


                                Must be a DNS_LABEL.
                                Cannot be updated.
                                More info: http://kubernetes.io/docs/user-guide/namespaces
                              type: string
                          type: object
                      type: object
                    version:
                      description: Channel tracks the active Version of the Module.
                      type: string
                  required:
                  - name
                  - state
                  type: object
                type: array
              state:
                description: |-
                  State signifies current state of Kyma.
                  Value can be one of ("Ready", "Processing", "Error", "Deleting").
                enum:
                - Processing
                - Deleting
                - Ready
                - Error
                - ""
                - Warning
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    cert-manager.io/inject-ca-from: kcp-system/klm-serving-cert
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: manifests.operator.kyma-project.io
spec:
  group: operator.kyma-project.io
  names:
    kind: Manifest
    listKind: ManifestList
    plural: manifests
    singular: manifest
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    deprecated: true
    deprecationWarning: kyma-project.io/v1beta1 Manifest is deprecated. Use v1beta2
      instead.
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: Manifest is the Schema for the manifests API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ManifestSpec defines the desired state of Manifest.
            properties:
              config:
                description: Config specifies OCI image configuration for Manifest
                properties:
                  credSecretSelector:
                    description: |-
                      CredSecretSelector is an optional field, for OCI image saved in private registry,
                      use it to indicate the secret which contains registry credentials,
                      must exist in the namespace same as manifest
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: |-
                            A label selector requirement is a selector that contains values, a key, and an operator that
                            relates the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: |-
                                operator represents a key's relationship to a set of values.
                                Valid operators are In, NotIn, Exists and DoesNotExist.
                              type: string
                            values:
                              description: |-
                                values is an array of string values. If the operator is In or NotIn,
                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced during a strategic
                                merge patch.
                              items:
                                type: string
                              type: array
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: |-
                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                  name:
                    description: Name defines the Image name
                    type: string
                  ref:
                    description: Ref is either a sha value, tag or version
                    type: string
                  repo:
                    description: Repo defines the Image repo
                    type: string
                  type:
                    description: |-
                      Type specifies the type of installation specification
                      that could be provided as part of a custom resource.
                      This time is used in codec to successfully decode from raw extensions.
                    enum:
                    - helm-chart
                    - oci-ref
                    - kustomize
                    - ""
                    type: string
                type: object
              install:
                description: Install specifies a list of installations for Manifest
                properties:
                  name:
                    description: Name specifies a unique install name for Manifest
                    type: string
                  source:
                    description: Source in the ImageSpec format
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - name
                - source
                type: object
              remote:
                description: Remote indicates if Manifest should be installed on a
                  remote cluster
                type: boolean
              resource:
                description: Resource specifies a resource to be watched for state
                  updates
                nullable: true
                type: object
                x-kubernetes-embedded-resource: true
                x-kubernetes-preserve-unknown-fields: true
              version:
                description: Version specifies current Resource version
                type: string
            required:
            - install
            - remote
            type: object
          status:
            description: Status defines the observed state of CustomObject.
            properties:
              conditions:
                description: |-
                  Conditions contain a set of conditionals to determine the State of Status.
                  If all Conditions are met, the State is expected to be in StateReady.
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource.\n---\nThis struct is intended for
                    direct use as an array at the field path .status.conditions.  For
                    example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                    observations of a foo's current state.\n\t    // Known .status.conditions.type
                    are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                    +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                    \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                    patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                    \   // other fields\n\t}"
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: |-
                        type of condition in CamelCase or in foo.example.com/CamelCase.
                        ---
                        Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                        useful (see .node.status.conditions), the ability to deconflict is important.
                        The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              lastOperation:
                description: LastOperation defines the last operation from the control-loop.
                properties:
                  lastUpdateTime:
                    format: date-time
                    type: string
                  operation:
                    type: string
                required:
                - operation
                type: object
              state:
                description: |-
                  State signifies current state of CustomObject.
                  Value can be one of ("Ready", "Processing", "Error", "Deleting", "Warning").
                enum:
                - Processing
                - Deleting
                - Ready
                - Error
                - ""
                - Warning
                type: string
              synced:
                description: |-
                  Synced determine a list of Resources that are currently actively synced.
                  All resources that are synced are considered for orphan removal on configuration changes,
                  and it is used to determine effective differences from one state to the next.
                items:
                  properties:
                    group:
                      type: string
                    kind:
                      type: string
                    name:
                      type: string
                    namespace:
                      type: string
                    version:
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  - namespace
                  - version
                  type: object
                type: array
                x-kubernetes-list-type: atomic
            type: object
        type: object
    served: false
    storage: false
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .status.state
      name: State
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta2
    schema:
      openAPIV3Schema:
        description: Manifest is the Schema for the manifests API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ManifestSpec defines the desired state of Manifest.
            properties:
              config:
                description: Config specifies OCI image configuration for Manifest
                properties:
                  credSecretSelector:
                    description: |-
                      CredSecretSelector is an optional field, for OCI image saved in private registry,
                      use it to indicate the secret which contains registry credentials,
                      must exist in the namespace same as manifest
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: |-
                            A label selector requirement is a selector that contains values, a key, and an operator that
                            relates the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: |-
                                operator represents a key's relationship to a set of values.
                                Valid operators are In, NotIn, Exists and DoesNotExist.
                              type: string
                            values:
                              description: |-
                                values is an array of string values. If the operator is In or NotIn,
                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced during a strategic
                                merge patch.
                              items:
                                type: string
                              type: array
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: |-
                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                  name:
                    description: Name defines the Image name
                    type: string
                  ref:
                    description: Ref is either a sha value, tag or version
                    type: string
                  repo:
                    description: Repo defines the Image repo
                    type: string
                  type:
                    description: |-
                      Type specifies the type of installation specification
                      that could be provided as part of a custom resource.
                      This time is used in codec to successfully decode from raw extensions.
                    enum:
                    - helm-chart
                    - oci-ref
                    - kustomize
                    - ""
                    type: string
                type: object
              install:
                description: Install specifies a list of installations for Manifest
                properties:
                  name:
                    description: Name specifies a unique install name for Manifest
                    type: string
                  source:
                    description: Source in the ImageSpec format
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                required:
                - name
                - source
                type: object
              remote:
                description: Remote indicates if Manifest should be installed on a
                  remote cluster
                type: boolean
              resource:
                description: Resource specifies a resource to be watched for state
                  updates
                nullable: true
                type: object
                x-kubernetes-embedded-resource: true
                x-kubernetes-preserve-unknown-fields: true
              version:
                description: Version specifies current Resource version
                type: string
            required:
            - install
            - remote
            type: object
          status:
            description: Status defines the observed state of CustomObject.
            properties:
              conditions:
                description: |-
                  Conditions contain a set of conditionals to determine the State of Status.
                  If all Conditions are met, the State is expected to be in StateReady.
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource.\n---\nThis struct is intended for
                    direct use as an array at the field path .status.conditions.  For
                    example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                    observations of a foo's current state.\n\t    // Known .status.conditions.type
                    are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                    +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                    \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                    patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                    \   // other fields\n\t}"
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: |-
                        type of condition in CamelCase or in foo.example.com/CamelCase.
                        ---
                        Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                        useful (see .node.status.conditions), the ability to deconflict is important.
                        The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              lastOperation:
                description: LastOperation defines the last operation from the control-loop.
                properties:
                  lastUpdateTime:
                    format: date-time
                    type: string
                  operation:
                    type: string
                required:
                - operation
                type: object
              state:
                description: |-
                  State signifies current state of CustomObject.
                  Value can be one of ("Ready", "Processing", "Error", "Deleting", "Warning").
                enum:
                - Processing
                - Deleting
                - Ready
                - Error
                - ""
                - Warning
                type: string
              synced:
                description: |-
                  Synced determine a list of Resources that are currently actively synced.
                  All resources that are synced are considered for orphan removal on configuration changes,
                  and it is used to determine effective differences from one state to the next.
                items:
                  properties:
                    group:
                      type: string
                    kind:
                      type: string
                    name:
                      type: string
                    namespace:
                      type: string
                    version:
                      type: string
                  required:
                  - group
                  - kind
                  - name
                  - namespace
                  - version
                  type: object
                type: array
                x-kubernetes-list-type: atomic
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    cert-manager.io/inject-ca-from: kcp-system/klm-serving-cert
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: moduletemplates.operator.kyma-project.io
spec:
  group: operator.kyma-project.io
  names:
    kind: ModuleTemplate
    listKind: ModuleTemplateList
    plural: moduletemplates
    singular: moduletemplate
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    deprecated: true
    deprecationWarning: kyma-project.io/v1beta1 ModuleTemplate is deprecated. Use
      v1beta2 instead.
    name: v1beta1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ModuleTemplateSpec defines the desired state of ModuleTemplate.
            properties:
              channel:
                description: |-
                  Channel is the targeted channel of the ModuleTemplate. It will be used to directly assign a Template
                  to a target channel. It has to be provided at any given time.
                maxLength: 32
                minLength: 3
                pattern: ^[a-z]+$
                type: string
              customStateCheck:
                items:
                  properties:
                    jsonPath:
                      description: JSONPath specifies the JSON path to the state variable
                        in the Module CR
                      type: string
                    mappedState:
                      description: MappedState is the Kyma CR State
                      enum:
                      - Processing
                      - Deleting
                      - Ready
                      - Error
                      - ""
                      - Warning
                      type: string
                    value:
                      description: Value is the value at the JSONPath for which the
                        Module CR state should map with MappedState
                      type: string
                  required:
                  - jsonPath
                  - mappedState
                  - value
                  type: object
                type: array
              data:
                description: |-
                  Data is the default set of attributes that are used to generate the Module. It contains a default set of values
                  for a given channel, and is thus different from default values allocated during struct parsing of the Module.
                  While Data can change after the initial creation of ModuleTemplate, it is not expected to be propagated to
                  downstream modules as it is considered a set of default values. This means that an update of the data block
                  will only propagate to new Modules created form ModuleTemplate, not any existing Module.
                type: object
                x-kubernetes-embedded-resource: true
                x-kubernetes-preserve-unknown-fields: true
              descriptor:
                description: |-
                  The Descriptor is the Open Component Model Descriptor of a Module, containing all relevant information
                  to correctly initialize a module (e.g. Charts, Manifests, References to Binaries and/or configuration)
                  Name more information on Component Descriptors, see
                  https://github.com/open-component-model/ocm


                  It is translated inside the Lifecycle of the Cluster and will be used by downstream controllers
                  to bootstrap and manage the module. This part is also propagated for every change of the template.
                  This means for upgrades of the Descriptor, downstream controllers will also update the dependant modules
                  (e.g. by updating the controller binary linked in a chart referenced in the descriptor)
                type: object
                x-kubernetes-preserve-unknown-fields: true
              mandatory:
                description: |-
                  Mandatory indicates whether the module is mandatory. It is used to enforce the installation of the module with
                  its configuration in all runtime clusters.
                type: boolean
              target:
                description: |-
                  Target describes where the Module should later on be installed if parsed correctly. It is used as installation
                  hint by downstream controllers to determine which client implementation to use for working with the Module
                enum:
                - control-plane
                - remote
                type: string
            required:
            - channel
            - descriptor
            - target
            type: object
        type: object
    served: false
    storage: false
    subresources: {}
  - additionalPrinterColumns:
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta2
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ModuleTemplateSpec defines the desired state of ModuleTemplate.
            properties:
              channel:
                description: |-
                  Channel is the targeted channel of the ModuleTemplate. It will be used to directly assign a Template
                  to a target channel. It has to be provided at any given time.
                maxLength: 32
                minLength: 3
                pattern: ^[a-z]+$
                type: string
              customStateCheck:
                items:
                  properties:
                    jsonPath:
                      description: JSONPath specifies the JSON path to the state variable
                        in the Module CR
                      type: string
                    mappedState:
                      description: MappedState is the Kyma CR State
                      enum:
                      - Processing
                      - Deleting
                      - Ready
                      - Error
                      - ""
                      - Warning
                      type: string
                    value:
                      description: Value is the value at the JSONPath for which the
                        Module CR state should map with MappedState
                      type: string
                  required:
                  - jsonPath
                  - mappedState
                  - value
                  type: object
                type: array
              data:
                description: |-
                  Data is the default set of attributes that are used to generate the Module. It contains a default set of values
                  for a given channel, and is thus different from default values allocated during struct parsing of the Module.
                  While Data can change after the initial creation of ModuleTemplate, it is not expected to be propagated to
                  downstream modules as it is considered a set of default values. This means that an update of the data block
                  will only propagate to new Modules created form ModuleTemplate, not any existing Module.
                type: object
                x-kubernetes-embedded-resource: true
                x-kubernetes-preserve-unknown-fields: true
              descriptor:
                description: |-
                  The Descriptor is the Open Component Model Descriptor of a Module, containing all relevant information
                  to correctly initialize a module (e.g. Manifests, References to Binaries and/or configuration)
                  Name more information on Component Descriptors, see
                  https://github.com/open-component-model/ocm


                  It is translated inside the Lifecycle of the Cluster and will be used by downstream controllers
                  to bootstrap and manage the module. This part is also propagated for every change of the template.
                  This means for upgrades of the Descriptor, downstream controllers will also update the dependant modules
                  (e.g. by updating the controller binary linked in a chart referenced in the descriptor)


                  NOTE: Only Raw Rendering is Supported for the layers. So previously used "config" layers for the helm
                  charts and kustomize renderers are deprecated and ignored.
                type: object
                x-kubernetes-preserve-unknown-fields: true
              mandatory:
                description: |-
                  Mandatory indicates whether the module is mandatory. It is used to enforce the installation of the module with
                  its configuration in all runtime clusters.
                type: boolean
            required:
            - channel
            - descriptor
            type: object
        type: object
    served: true
    storage: true
    subresources: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    cert-manager.io/inject-ca-from: kcp-system/klm-serving-cert
    controller-gen.kubebuilder.io/version: v0.14.0
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: watchers.operator.kyma-project.io
spec:
  group: operator.kyma-project.io
  names:
    kind: Watcher
    listKind: WatcherList
    plural: watchers
    singular: watcher
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    deprecated: true
    deprecationWarning: kyma-project.io/v1beta1 Watcher is deprecated. Use v1beta2
      instead.
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: Watcher is the Schema for the watchers API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: WatcherSpec defines the desired state of Watcher.
            properties:
              field:
                description: |-
                  Field describes the subresource that should be watched
                  Value can be one of ("spec", "status")
                enum:
                - spec
                - status
                type: string
              gateway:
                description: |-
                  Gateway configures the Istio Gateway for the VirtualService that is created/updated during processing
                  of the Watcher CR.
                properties:
                  selector:
                    description: LabelSelector allows to select the Gateway using
                      label selectors as defined in the K8s LIST API.
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: |-
                            A label selector requirement is a selector that contains values, a key, and an operator that
                            relates the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: |-
                                operator represents a key's relationship to a set of values.
                                Valid operators are In, NotIn, Exists and DoesNotExist.
                              type: string
                            values:
                              description: |-
                                values is an array of string values. If the operator is In or NotIn,
                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced during a strategic
                                merge patch.
                              items:
                                type: string
                              type: array
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: |-
                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                required:
                - selector
                type: object
              labelsToWatch:
                additionalProperties:
                  type: string
                description: LabelsToWatch describes the labels that should be watched
                type: object
              resourceToWatch:
                description: ResourceToWatch is the GroupVersionResource of the resource
                  that should be watched.
                properties:
                  group:
                    type: string
                  resource:
                    type: string
                  version:
                    type: string
                required:
                - group
                - resource
                - version
                type: object
              serviceInfo:
                description: ServiceInfo describes the service information of the
                  listener
                properties:
                  name:
                    description: Name describes the service name.
                    type: string
                  namespace:
                    description: Namespace describes the service namespace.
                    type: string
                  port:
                    description: Port describes the service port.
                    format: int64
                    type: integer
                required:
                - name
                - namespace
                - port
                type: object
            required:
            - field
            - gateway
            - labelsToWatch
            - resourceToWatch
            - serviceInfo
            type: object
          status:
            description: WatcherStatus defines the observed state of Watcher.
            properties:
              conditions:
                description: List of status conditions to indicate the status of a
                  Watcher.
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource.\n---\nThis struct is intended for
                    direct use as an array at the field path .status.conditions.  For
                    example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                    observations of a foo's current state.\n\t    // Known .status.conditions.type
                    are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                    +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                    \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                    patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                    \   // other fields\n\t}"
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: |-
                        type of condition in CamelCase or in foo.example.com/CamelCase.
                        ---
                        Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                        useful (see .node.status.conditions), the ability to deconflict is important.
                        The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              observedGeneration:
                description: ObservedGeneration
                format: int64
                type: integer
              state:
                description: |-
                  State signifies current state of a Watcher.
                  Value can be one of ("Ready", "Processing", "Error", "Deleting", "Warning")
                enum:
                - Processing
                - Deleting
                - Ready
                - Error
                - ""
                - Warning
                type: string
            required:
            - state
            type: object
        type: object
    served: false
    storage: false
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1beta2
    schema:
      openAPIV3Schema:
        description: Watcher is the Schema for the watchers API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: WatcherSpec defines the desired state of Watcher.
            properties:
              field:
                description: |-
                  Field describes the subresource that should be watched
                  Value can be one of ("spec", "status")
                enum:
                - spec
                - status
                type: string
              gateway:
                description: |-
                  Gateway configures the Istio Gateway for the VirtualService that is created/updated during processing
                  of the Watcher CR.
                properties:
                  selector:
                    description: LabelSelector allows to select the Gateway using
                      label selectors as defined in the K8s LIST API.
                    properties:
                      matchExpressions:
                        description: matchExpressions is a list of label selector
                          requirements. The requirements are ANDed.
                        items:
                          description: |-
                            A label selector requirement is a selector that contains values, a key, and an operator that
                            relates the key and values.
                          properties:
                            key:
                              description: key is the label key that the selector
                                applies to.
                              type: string
                            operator:
                              description: |-
                                operator represents a key's relationship to a set of values.
                                Valid operators are In, NotIn, Exists and DoesNotExist.
                              type: string
                            values:
                              description: |-
                                values is an array of string values. If the operator is In or NotIn,
                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                the values array must be empty. This array is replaced during a strategic
                                merge patch.
                              items:
                                type: string
                              type: array
                          required:
                          - key
                          - operator
                          type: object
                        type: array
                      matchLabels:
                        additionalProperties:
                          type: string
                        description: |-
                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                        type: object
                    type: object
                    x-kubernetes-map-type: atomic
                required:
                - selector
                type: object
              labelsToWatch:
                additionalProperties:
                  type: string
                description: LabelsToWatch describes the labels that should be watched
                type: object
              resourceToWatch:
                description: ResourceToWatch is the GroupVersionResource of the resource
                  that should be watched.
                properties:
                  group:
                    type: string
                  resource:
                    type: string
                  version:
                    type: string
                required:
                - group
                - resource
                - version
                type: object
              serviceInfo:
                description: ServiceInfo describes the service information of the
                  listener
                properties:
                  name:
                    description: Name describes the service name.
                    type: string
                  namespace:
                    description: Namespace describes the service namespace.
                    type: string
                  port:
                    description: Port describes the service port.
                    format: int64
                    type: integer
                required:
                - name
                - namespace
                - port
                type: object
            required:
            - field
            - gateway
            - labelsToWatch
            - resourceToWatch
            - serviceInfo
            type: object
          status:
            description: WatcherStatus defines the observed state of Watcher.
            properties:
              conditions:
                description: List of status conditions to indicate the status of a
                  Watcher.
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource.\n---\nThis struct is intended for
                    direct use as an array at the field path .status.conditions.  For
                    example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                    observations of a foo's current state.\n\t    // Known .status.conditions.type
                    are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                    +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                    \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                    patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                    \   // other fields\n\t}"
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: |-
                        type of condition in CamelCase or in foo.example.com/CamelCase.
                        ---
                        Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                        useful (see .node.status.conditions), the ability to deconflict is important.
                        The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              observedGeneration:
                description: ObservedGeneration
                format: int64
                type: integer
              state:
                description: |-
                  State signifies current state of a Watcher.
                  Value can be one of ("Ready", "Processing", "Error", "Deleting", "Warning")
                enum:
                - Processing
                - Deleting
                - Ready
                - Error
                - ""
                - Warning
                type: string
            required:
            - state
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-controller-manager
  namespace: kcp-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-leader-election-role
  namespace: kcp-system
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-manager-role
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - get
  - list
  - patch
  - watch
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - create
  - delete
  - get
  - list
  - update
  - watch
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions/status
  verbs:
  - update
- apiGroups:
  - cert-manager.io
  resources:
  - certificates
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - cert-manager.io
  resources:
  - issuers
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.istio.io
  resources:
  - gateways
  verbs:
  - create
  - delete
  - get
  - list
  - watch
- apiGroups:
  - networking.istio.io
  resources:
  - virtualservices
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
- apiGroups:
  - operator.kyma-project.io
  resources:
  - kymas
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - operator.kyma-project.io
  resources:
  - kymas/finalizers
  verbs:
  - update
- apiGroups:
  - operator.kyma-project.io
  resources:
  - kymas/status
  verbs:
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - operator.kyma-project.io
  resources:
  - moduletemplates
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - operator.kyma-project.io
  resources:
  - moduletemplates/finalizers
  verbs:
  - update
- apiGroups:
  - operator.kyma-project.io
  resources:
  - watchers
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - operator.kyma-project.io
  resources:
  - watchers/finalizers
  verbs:
  - update
- apiGroups:
  - operator.kyma-project.io
  resources:
  - watchers/status
  verbs:
  - get
  - patch
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-manager-role-manifest
rules:
- apiGroups:
  - operator.kyma-project.io
  resources:
  - manifests
  verbs:
  - create
  - delete
  - get
  - list
  - patch
  - update
  - watch
- apiGroups:
  - operator.kyma-project.io
  resources:
  - manifests/finalizers
  verbs:
  - update
- apiGroups:
  - operator.kyma-project.io
  resources:
  - manifests/status
  verbs:
  - get
  - patch
  - update
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-metrics-reader
rules:
- nonResourceURLs:
  - /metrics
  verbs:
  - get
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-leader-election-rolebinding
  namespace: kcp-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: klm-leader-election-role
subjects:
- kind: ServiceAccount
  name: klm-controller-manager
  namespace: kcp-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-manager-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: klm-manager-role
subjects:
- kind: ServiceAccount
  name: klm-controller-manager
  namespace: kcp-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-manager-rolebinding-manifest
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: klm-manager-role-manifest
subjects:
- kind: ServiceAccount
  name: klm-controller-manager
  namespace: kcp-system
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-metrics-rolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: klm-metrics-reader
subjects:
- kind: ServiceAccount
  name: klm-controller-manager
  namespace: kcp-system
---
apiVersion: v1
data:
  controller_manager_config.yaml: |
    apiVersion: controller-runtime.sigs.k8s.io/v1alpha1
    kind: ControllerManagerConfig
    health:
      healthProbeBindAddress: :8081
    metrics:
      bindAddress: 127.0.0.1:8080
    webhook:
      port: 9443
    leaderElection:
      leaderElect: true
      resourceName: 893110f7.kyma-project.io
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-manager-config
  namespace: kcp-system
---
apiVersion: v1
data:
  overview.json: |
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "gnetId": null,
      "graphTooltip": 0,
      "links": [],
      "panels": [
        {
          "collapsed": false,
          "datasource": null,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 60,
          "panels": [],
          "title": "General",
          "type": "row"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 0,
            "y": 1
          },
          "hiddenSeries": false,
          "id": 34,
          "interval": "1m",
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "sum(rate(rest_client_requests_total{job=\"klm-metrics-service\", code=~\"2..\"}[$__rate_interval]))",
              "format": "time_series",
              "interval": "",
              "intervalFactor": 2,
              "legendFormat": "2xx",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "sum(rate(rest_client_requests_total{job=\"klm-metrics-service\", code=~\"3..\"}[$__rate_interval]))",
              "format": "time_series",
              "interval": "",
              "intervalFactor": 2,
              "legendFormat": "3xx",
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "sum(rate(rest_client_requests_total{job=\"klm-metrics-service\", code=~\"4..\"}[$__rate_interval]))",
              "format": "time_series",
              "interval": "",
              "intervalFactor": 2,
              "legendFormat": "4xx",
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "sum(rate(rest_client_requests_total{job=\"klm-metrics-service\", code=~\"5..\"}[$__rate_interval]))",
              "format": "time_series",
              "interval": "",
              "intervalFactor": 2,
              "legendFormat": "5xx",
              "refId": "D"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Lifecycle Manager Kube API Request Rate",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:133",
              "format": "ops",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:134",
              "format": "ops",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 8,
            "y": 1
          },
          "hiddenSeries": false,
          "id": 39,
          "interval": "1m",
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "process_resident_memory_bytes{job=\"klm-metrics-service\"}",
              "hide": false,
              "interval": "",
              "legendFormat": "Lifecycle Manager",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Lifecycle Manager Memory",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:339",
              "format": "bytes",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:340",
              "format": "bytes",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "fieldConfig": {
            "defaults": {
              "unit": "short"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 16,
            "y": 1
          },
          "hiddenSeries": false,
          "id": 41,
          "interval": "1m",
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "rate(process_cpu_seconds_total{job=\"klm-metrics-service\"}[$__rate_interval])",
              "interval": "",
              "legendFormat": "{{job}}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Lifecycle Manager CPU usage",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:392",
              "format": "short",
              "logBase": 1,
              "min": 0,
              "show": true
            },
            {
              "$$hashKey": "object:393",
              "format": "short",
              "logBase": 1,
              "min": 0,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "collapsed": false,
          "datasource": null,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 8
          },
          "id": 9,
          "panels": [],
          "title": "Reconcile",
          "type": "row"
        },
        {
          "datasource": null,
          "description": "Total number of successfully reconciliations per controller.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "graph": false,
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 9
          },
          "id": 42,
          "interval": "15s",
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single"
            },
            "tooltipOptions": {
              "mode": "single"
            }
          },
          "pluginVersion": "8.3.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "rate(controller_runtime_reconcile_total{controller=~\"kyma|watcher|purge|manifest|mandatory-module-installation|mandatory-module-deletion\",job=\"klm-metrics-service\"}[$__rate_interval])",
              "hide": false,
              "instant": false,
              "interval": "",
              "intervalFactor": 1,
              "legendFormat": "{{controller }} - {{result}}",
              "refId": "A"
            }
          ],
          "title": "Lifecycle Manager Controller Runtime Reconcile Success",
          "type": "timeseries"
        },
        {
          "datasource": null,
          "description": "Total number of reconciliation errors per controller.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "graph": false,
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 9
          },
          "id": 13,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single"
            },
            "tooltipOptions": {
              "mode": "single"
            }
          },
          "pluginVersion": "8.3.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "rate(controller_runtime_reconcile_errors_total{controller=~\"kyma|watcher|purge|manifest|mandatory-module-installation|mandatory-module-deletion\",job=\"klm-metrics-service\"}[$__rate_interval])",
              "interval": "",
              "legendFormat": "{{controller}}",
              "refId": "A"
            }
          ],
          "title": "Operator Controller Runtime Reconcile Errors",
          "type": "timeseries"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "decimals": null,
          "description": "How many times Kyma was requeued due to specific reasons",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 13,
            "w": 24,
            "x": 0,
            "y": 17
          },
          "hiddenSeries": false,
          "id": 82,
          "legend": {
            "alignAsTable": false,
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "rightSide": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "rate(lifecycle_mgr_requeue_reason_total)[$__rate_interval]",
              "format": "time_series",
              "instant": false,
              "interval": "",
              "legendFormat": "{{requeue_reason}} - {{requeue_type}}",
              "refId": "kyma_under_deletion_with_no_access_secret"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Kyma Requeue Reason",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:152",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "$$hashKey": "object:153",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "description": "How long in seconds processing an item from workqueue takes.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 30
          },
          "hiddenSeries": false,
          "id": 43,
          "interval": "1m",
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "rate(controller_runtime_reconcile_time_seconds_sum{controller=\"manifest\"}[$__rate_interval])\n/\nrate(controller_runtime_reconcile_time_seconds_count{controller=\"manifest\"}[$__rate_interval])",
              "interval": "",
              "legendFormat": "{{controller}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "rate(controller_runtime_reconcile_time_seconds_sum{controller=\"kyma\"}[$__rate_interval])\n/\nrate(controller_runtime_reconcile_time_seconds_count{controller=\"kyma\"}[$__rate_interval])",
              "hide": false,
              "interval": "",
              "legendFormat": "{{controller}}",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "reconcile_duration_seconds",
              "hide": false,
              "interval": "",
              "legendFormat": "Manifest: {{manifest_name}}",
              "refId": "C"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Reconcile Duration",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:101",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:102",
              "format": "s",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "datasource": null,
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 37
          },
          "id": 44,
          "options": {
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "text": {}
          },
          "pluginVersion": "7.5.29",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "sum by (controller) (controller_runtime_max_concurrent_reconciles{container=\"manager\",controller=\"kyma\"})",
              "interval": "",
              "legendFormat": "{{controller}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "sum by (controller) (controller_runtime_max_concurrent_reconciles{container=\"manager\",controller=\"manifest\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "{{controller}}",
              "refId": "B"
            }
          ],
          "title": "Max Workers",
          "type": "gauge"
        },
        {
          "datasource": null,
          "description": "Number of currently used workers per controller",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "graph": false,
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 37
          },
          "id": 45,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single"
            },
            "tooltipOptions": {
              "mode": "single"
            }
          },
          "pluginVersion": "8.3.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "controller_runtime_active_workers{controller=\"kyma\"}",
              "interval": "",
              "legendFormat": "{{controller}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "controller_runtime_active_workers{controller=\"manifest\"}",
              "hide": false,
              "interval": "",
              "legendFormat": "{{controller}}",
              "refId": "B"
            }
          ],
          "title": "Active Workers",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "datasource": null,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 45
          },
          "id": 7,
          "panels": [],
          "title": "Workqueue",
          "type": "row"
        },
        {
          "datasource": null,
          "description": "How many seconds has the longest running processor for workqueue been running.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "graph": false,
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineStyle": {
                  "fill": "solid"
                },
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 46
          },
          "id": 5,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single"
            },
            "tooltipOptions": {
              "mode": "single"
            }
          },
          "pluginVersion": "8.3.3",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "workqueue_longest_running_processor_seconds{job=\"klm-metrics-service\"}",
              "interval": "",
              "legendFormat": "{{job}}",
              "refId": "A"
            }
          ],
          "title": "Workqueue Longest running processor seconds",
          "type": "timeseries"
        },
        {
          "datasource": null,
          "description": "How many seconds of work has been done that is in progress and hasnt been observed by work_duration. Large values indicate stuck threads. One can deduce the number of stuck threads by observing the rate at which this increases.\nworkqueue_longest_running_processor_seconds\tGauge\t",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "graph": false,
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 46
          },
          "id": 20,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltip": {
              "mode": "single"
            },
            "tooltipOptions": {
              "mode": "single"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "workqueue_unfinished_work_seconds{job=\"klm-metrics-service\"}",
              "hide": false,
              "interval": "",
              "legendFormat": "{{job}}",
              "refId": "D"
            }
          ],
          "title": "Workqueue Unfinished Work Seconds",
          "type": "timeseries"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "description": "How long in seconds an item stays in workqueue before being requested.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 54
          },
          "hiddenSeries": false,
          "id": 31,
          "interval": "10s",
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "  rate(workqueue_queue_duration_seconds_sum{name=\"manifest\"}[$__rate_interval])\n/\n  rate(workqueue_queue_duration_seconds_count{name=\"manifest\"}[$__rate_interval])",
              "interval": "",
              "legendFormat": "{{name}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "  rate(workqueue_queue_duration_seconds_sum{name=\"kyma\"}[$__rate_interval])\n/\n  rate(workqueue_queue_duration_seconds_count{name=\"kyma\"}[$__rate_interval])",
              "hide": false,
              "interval": "",
              "legendFormat": "{{name}}",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Work Queue Processing Latency",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:365",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:366",
              "format": "s",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "description": "How long in seconds processing an item from workqueue takes.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 61
          },
          "hiddenSeries": false,
          "id": 46,
          "interval": "10s",
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "rate(workqueue_work_duration_seconds_sum{name=\"manifest\"}[$__rate_interval])\n/\nrate(workqueue_work_duration_seconds_count{name=\"manifest\"}[$__rate_interval])",
              "interval": "",
              "legendFormat": "{{name}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "rate(workqueue_work_duration_seconds_sum{name=\"kyma\"}[$__rate_interval])\n/\nrate(workqueue_work_duration_seconds_count{name=\"kyma\"}[$__rate_interval])",
              "hide": false,
              "interval": "",
              "legendFormat": "{{name}}",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Work Queue Processing Duration",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:275",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:276",
              "format": "s",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "description": "The number of actions waiting in the queue to be performed.",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 68
          },
          "hiddenSeries": false,
          "id": 29,
          "interval": "10s",
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "workqueue_depth{name=\"manifest\"}",
              "interval": "",
              "legendFormat": "{{name}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "workqueue_depth{name=\"kyma\"}",
              "hide": false,
              "interval": "",
              "legendFormat": "{{name}}",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Work Queue Depth",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:567",
              "format": "short",
              "logBase": 1,
              "min": 0,
              "show": true
            },
            {
              "$$hashKey": "object:568",
              "format": "short",
              "logBase": 1,
              "min": 0,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "fieldConfig": {
            "defaults": {
              "unit": "ops"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 75
          },
          "hiddenSeries": false,
          "id": 27,
          "interval": "10s",
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 5,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "sum(rate(workqueue_adds_total{name=\"manifest\"}[$__rate_interval])) by (name)",
              "format": "time_series",
              "interval": "",
              "intervalFactor": 2,
              "legendFormat": "{{name}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "P1809F7CD0C75ACF3"
              },
              "exemplar": true,
              "expr": "sum(rate(workqueue_adds_total{name=\"kyma\"}[$__rate_interval])) by (name)",
              "hide": false,
              "interval": "",
              "legendFormat": "{{name}}",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Work Queue Add Rate",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:186",
              "format": "ops",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:187",
              "format": "ops",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "collapsed": false,
          "datasource": null,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 82
          },
          "id": 78,
          "panels": [],
          "title": "Certificate",
          "type": "row"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "description": "Indicates the self-signed Certificate of related Kyma is not renewed yet",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 83
          },
          "hiddenSeries": false,
          "id": 80,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "lifecycle_mgr_self_signed_cert_not_renew{service=\"klm-metrics-service\"}",
              "interval": "",
              "legendFormat": "{{kyma_name}}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Self-signed Certificate Not Renew",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "collapsed": false,
          "datasource": null,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 90
          },
          "id": 62,
          "panels": [],
          "title": "Purge Controller",
          "type": "row"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 91
          },
          "hiddenSeries": false,
          "id": 58,
          "legend": {
            "avg": true,
            "current": false,
            "max": true,
            "min": false,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "lifecycle_mgr_purgectrl_time",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Purge Duration Seconds",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:103",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "$$hashKey": "object:104",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 91
          },
          "hiddenSeries": false,
          "id": 64,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "rate(lifecycle_mgr_purgectrl_requests_total{service=\"klm-metrics-service\"}[$__rate_interval])",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Purge Count",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": null,
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 11,
            "w": 24,
            "x": 0,
            "y": 99
          },
          "hiddenSeries": false,
          "id": 66,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "lifecycle_mgr_purgectrl_error{err_reason=\"CleanupError\"}",
              "interval": "",
              "legendFormat": "{{err_reason}} Kyma: {{kyma_name}} ShootID: {{shoot}} InstanceID: {{instance_id}}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Purge Errors",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        }
      ],
      "refresh": "",
      "schemaVersion": 27,
      "style": "dark",
      "tags": [],
      "templating": {
        "list": []
      },
      "time": {
        "from": "now-7d",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Lifecycle Manager Overview",
      "uid": "O3DH7uunk",
      "version": 1
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
    grafana_dashboard: "1"
  name: klm-dashboard-overview
  namespace: kyma-system
---
apiVersion: v1
data:
  status.json: |-
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "description": "",
      "editable": true,
      "gnetId": null,
      "graphTooltip": 0,
      "id": 14,
      "links": [],
      "panels": [
        {
          "collapsed": false,
          "datasource": null,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 4,
          "panels": [],
          "title": "Kyma State Overview",
          "type": "row"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "Prometheus",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 10,
            "w": 24,
            "x": 0,
            "y": 1
          },
          "hiddenSeries": false,
          "id": 2,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_kyma_state{state=\"Ready\"})",
              "interval": "",
              "legendFormat": "Ready",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_kyma_state{state=\"Deleting\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Deleting",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_kyma_state{state=\"Processing\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Processing",
              "refId": "C"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_kyma_state{state=\"Error\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Error",
              "refId": "D"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_kyma_state{state=\"Warning\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Warning",
              "refId": "E"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Kyma State Total",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1055",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "$$hashKey": "object:1056",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "Prometheus",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 10,
            "w": 24,
            "x": 0,
            "y": 11
          },
          "hiddenSeries": false,
          "id": 5,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_module_state{state=\"Ready\"})",
              "interval": "",
              "legendFormat": "Ready",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_module_state{state=\"Deleting\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Deleting",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_module_state{state=\"Processing\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Processing",
              "refId": "C"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_module_state{state=\"Error\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Error",
              "refId": "D"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_module_state{state=\"Warning\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Warning",
              "refId": "E"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Module State Total",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1055",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "$$hashKey": "object:1056",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "Prometheus",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 10,
            "w": 18,
            "x": 0,
            "y": 21
          },
          "hiddenSeries": false,
          "id": 6,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.29",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_mandatory_module_state{state=\"Ready\"})",
              "interval": "",
              "legendFormat": "Ready",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_mandatory_module_state{state=\"Deleting\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Deleting",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_mandatory_module_state{state=\"Processing\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Processing",
              "refId": "C"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_mandatory_module_state{state=\"Error\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Error",
              "refId": "D"
            },
            {
              "exemplar": true,
              "expr": "sum(lifecycle_mgr_mandatory_module_state{state=\"Warning\"})",
              "hide": false,
              "interval": "",
              "legendFormat": "Warning",
              "refId": "E"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Mandatory Module State Total",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:1055",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "$$hashKey": "object:1056",
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "datasource": null,
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 10,
            "w": 6,
            "x": 18,
            "y": 21
          },
          "id": 8,
          "options": {
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "text": {}
          },
          "pluginVersion": "7.5.29",
          "targets": [
            {
              "exemplar": true,
              "expr": "lifecycle_mgr_mandatory_modules",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "title": "Mandatory Modules Count",
          "type": "gauge"
        }
      ],
      "schemaVersion": 27,
      "style": "dark",
      "tags": [],
      "templating": {
        "list": []
      },
      "time": {
        "from": "now-24h",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Lifecycle Manager Kyma Status",
      "uid": "eniERxEVz",
      "version": 1
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
    grafana_dashboard: "1"
  name: klm-dashboard-status
  namespace: kyma-system
---
apiVersion: v1
data:
  watcher.json: |
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "target": {
              "limit": 100,
              "matchAny": false,
              "tags": [],
              "type": "dashboard"
            },
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "gnetId": null,
      "graphTooltip": 0,
      "id": 41,
      "links": [],
      "panels": [
        {
          "collapsed": false,
          "datasource": null,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 90
          },
          "id": 50,
          "panels": [],
          "title": "Listener",
          "type": "row"
        },
        {
          "datasource": null,
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "bars",
                "fillOpacity": 10,
                "gradientMode": "none",
                "hideFrom": {
                  "graph": false,
                  "legend": false,
                  "tooltip": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": true
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 24,
            "x": 0,
            "y": 91
          },
          "id": 48,
          "options": {
            "graph": {},
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltipOptions": {
              "mode": "single"
            }
          },
          "pluginVersion": "",
          "targets": [
            {
              "exemplar": true,
              "expr": "rate(watcher_listener_requests_total[$__rate_interval])",
              "instant": false,
              "interval": "",
              "legendFormat": "Pod: {{pod}}",
              "refId": "A"
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Requests per Minute",
          "type": "timeseries"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "Prometheus",
          "fieldConfig": {
            "defaults": {
              "unit": "s"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 100
          },
          "hiddenSeries": false,
          "id": 52,
          "legend": {
            "avg": true,
            "current": false,
            "max": true,
            "min": false,
            "show": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null as zero",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.28",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "watcher_listener_request_duration",
              "format": "time_series",
              "instant": false,
              "interval": "",
              "legendFormat": "Pod: {{pod}}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Request Duration",
          "tooltip": {
            "shared": false,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "s",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "datasource": null,
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 5
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 100
          },
          "id": 54,
          "options": {
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showThresholdLabels": false,
            "showThresholdMarkers": true,
            "text": {}
          },
          "pluginVersion": "7.5.28",
          "targets": [
            {
              "exemplar": true,
              "expr": "watcher_listener_inflight_requests",
              "interval": "",
              "legendFormat": "Pod: {{pod}}",
              "refId": "A"
            }
          ],
          "title": "Pending Requests",
          "type": "gauge"
        },
        {
          "datasource": null,
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "bars",
                "fillOpacity": 10,
                "gradientMode": "none",
                "hideFrom": {
                  "graph": false,
                  "legend": false,
                  "tooltip": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": true
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "#EAB839",
                    "value": 5
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 109
          },
          "id": 56,
          "options": {
            "graph": {},
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom"
            },
            "tooltipOptions": {
              "mode": "single"
            }
          },
          "pluginVersion": "",
          "targets": [
            {
              "exemplar": true,
              "expr": "rate(watcher_listener_request_errors_total[$__rate_interval])",
              "interval": "",
              "legendFormat": "Total Failed Requests",
              "refId": "A"
            },
            {
              "exemplar": true,
              "expr": "rate(watcher_listener_exceeding_size_limit_requests_total[$__rate_interval])",
              "hide": false,
              "interval": "",
              "legendFormat": "Failed Requests due to Size Limit",
              "refId": "B"
            },
            {
              "exemplar": true,
              "expr": "rate(watcher_listener_failed_verification_requests_total[$__rate_interval])",
              "hide": false,
              "interval": "",
              "legendFormat": "Failed Requests due to Verification Error",
              "refId": "C"
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Failed Requests per Minute",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "datasource": null,
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 117
          },
          "id": 68,
          "panels": [],
          "title": "SKR-Webhook",
          "type": "row"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "VictoriaMetrics",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 118
          },
          "hiddenSeries": false,
          "id": 70,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.28",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "watcher_request_duration",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "AdmissionRequest Duration",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "VictoriaMetrics",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 118
          },
          "hiddenSeries": false,
          "id": 72,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.28",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "rate(watcher_admission_request_error_total)[5m]",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "AdmissionRequest Error Total",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "VictoriaMetrics",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 126
          },
          "hiddenSeries": false,
          "id": 73,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.28",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "rate(watcher_admission_request_total[5m])",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "AdmissionRequests Total",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "VictoriaMetrics",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 126
          },
          "hiddenSeries": false,
          "id": 74,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.28",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "rate(watcher_failed_kcp_total[5m])",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Failed KCP Requests Total",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "VictoriaMetrics",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 134
          },
          "hiddenSeries": false,
          "id": 75,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.28",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "rate(watcher_kcp_requests_total[5m])",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "KCP Requests Total",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "VictoriaMetrics",
          "fieldConfig": {
            "defaults": {},
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 134
          },
          "hiddenSeries": false,
          "id": 76,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "7.5.28",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "exemplar": true,
              "expr": "rate(watcher_admission_request_total[5m]) / rate(watcher_kcp_requests_total[5m])",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Requests Ratio",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            },
            {
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        }
      ],
      "refresh": "",
      "schemaVersion": 27,
      "style": "dark",
      "tags": [],
      "templating": {
        "list": []
      },
      "time": {
        "from": "now-7d",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "",
      "title": "Lifecycle Manager Watcher Components",
      "uid": "O3DERxEnk",
      "version": 1
    }
kind: ConfigMap
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
    grafana_dashboard: "1"
  name: klm-dashboard-watcher
  namespace: kyma-system
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-event-service
  namespace: kcp-system
spec:
  ports:
  - name: klm
    port: 8082
    protocol: TCP
    targetPort: 8082
  - name: kmm
    port: 8083
    protocol: TCP
    targetPort: 8083
  selector:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/component: lifecycle-manager.kyma-project.io
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-metrics-service
  namespace: kcp-system
spec:
  ports:
  - appProtocol: http
    name: metrics
    port: 8080
    protocol: TCP
    targetPort: metrics
  selector:
    app.kubernetes.io/component: lifecycle-manager.kyma-project.io
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-webhook-service
  namespace: kcp-system
spec:
  ports:
  - port: 443
    protocol: TCP
    targetPort: 9443
  selector:
    app.kubernetes.io/component: lifecycle-manager.kyma-project.io
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app.kubernetes.io/component: lifecycle-manager.kyma-project.io
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-controller-manager
  namespace: kcp-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/component: lifecycle-manager.kyma-project.io
      app.kubernetes.io/created-by: argo-cd
      app.kubernetes.io/instance: kcp-lifecycle-manager
      app.kubernetes.io/managed-by: kustomize
      app.kubernetes.io/name: lifecycle-manager
      app.kubernetes.io/part-of: kcp
  template:
    metadata:
      annotations:
        kubectl.kubernetes.io/default-container: manager
        traffic.sidecar.istio.io/excludeInboundPorts: "9443"
      labels:
        app.kubernetes.io/component: lifecycle-manager.kyma-project.io
        app.kubernetes.io/created-by: argo-cd
        app.kubernetes.io/instance: kcp-lifecycle-manager
        app.kubernetes.io/managed-by: kustomize
        app.kubernetes.io/name: lifecycle-manager
        app.kubernetes.io/part-of: kcp
    spec:
      containers:
      - args:
        - --leader-elect
        - --enable-kcp-watcher
        - --skr-watcher-path=/skr-webhook
        - --skr-watcher-image-tag=v20240206-d3903ab2
        - --enable-domain-name-pinning=true
        - --enable-webhooks=true
        - --in-kcp-mode
        - --rate-limiter-burst=2000
        - --rate-limiter-frequency=1000
        - --k8s-client-qps=1000
        - --k8s-client-burst=2000
        - --cache-sync-timeout=60m
        - --failure-max-delay=30s
        - --failure-base-delay=5s
        - --is-kyma-managed
        command:
        - /manager
        image: europe-docker.pkg.dev/kyma-project/prod/lifecycle-manager:latest
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8081
          initialDelaySeconds: 15
          periodSeconds: 20
        name: manager
        ports:
        - containerPort: 9443
          name: webhook-server
          protocol: TCP
        - containerPort: 8082
          name: listener
        - containerPort: 8080
          name: metrics
        readinessProbe:
          httpGet:
            path: /readyz
            port: 8081
          initialDelaySeconds: 5
          periodSeconds: 10
        resources:
          limits:
            memory: 4000Mi
          requests:
            cpu: 1000m
            memory: 1000Mi
        securityContext:
          allowPrivilegeEscalation: false
        volumeMounts:
        - mountPath: /tmp/k8s-webhook-server/serving-certs
          name: cert
          readOnly: true
      securityContext:
        runAsNonRoot: true
      serviceAccountName: klm-controller-manager
      terminationGracePeriodSeconds: 10
      volumes:
      - name: cert
        secret:
          defaultMode: 420
          secretName: lifecycle-manager-webhook-server-cert
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-watcher-serving-cert
  namespace: istio-system
spec:
  commonName: klm-watcher-selfsigned-ca
  dnsNames:
  - listener.kyma.cloud.sap
  isCA: true
  issuerRef:
    group: cert-manager.io
    kind: ClusterIssuer
    name: klm-watcher-selfsigned-cluster-issuer
  privateKey:
    algorithm: RSA
  secretName: klm-watcher-root-secret
  secretTemplate:
    labels:
      operator.kyma-project.io/managed-by: lifecycle-manager
---
apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-serving-cert
  namespace: kcp-system
spec:
  dnsNames:
  - klm-webhook-service.kcp-system.svc
  - klm-webhook-service.kcp-system.svc.cluster.local
  issuerRef:
    kind: Issuer
    name: klm-selfsigned-issuer
  secretName: lifecycle-manager-webhook-server-cert
---
apiVersion: cert-manager.io/v1
kind: ClusterIssuer
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-watcher-selfsigned-cluster-issuer
  namespace: kcp-system
spec:
  selfSigned: {}
---
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
    operator.kyma-project.io/managed-by: lifecycle-manager
    operator.kyma-project.io/purpose: klm-watcher-cert-manager
  name: klm-watcher-selfsigned-issuer
  namespace: istio-system
spec:
  ca:
    secretName: klm-watcher-root-secret
---
apiVersion: cert-manager.io/v1
kind: Issuer
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-selfsigned-issuer
  namespace: kcp-system
spec:
  selfSigned: {}
---
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app.kubernetes.io/component: lifecycle-manager.kyma-project.io
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-controller-manager-metrics-monitor
  namespace: kcp-system
spec:
  endpoints:
  - path: /metrics
    port: metrics
    scheme: https
    tlsConfig:
      caFile: /etc/prometheus/secrets/istio.default/root-cert.pem
      certFile: /etc/prometheus/secrets/istio.default/cert-chain.pem
      insecureSkipVerify: true
      keyFile: /etc/prometheus/secrets/istio.default/key.pem
  selector:
    matchLabels:
      app.kubernetes.io/component: lifecycle-manager.kyma-project.io
      app.kubernetes.io/created-by: argo-cd
      app.kubernetes.io/instance: kcp-lifecycle-manager
      app.kubernetes.io/managed-by: kustomize
      app.kubernetes.io/name: lifecycle-manager
      app.kubernetes.io/part-of: kcp
---
apiVersion: networking.istio.io/v1beta1
kind: Gateway
metadata:
  annotations:
    proxy.istio.io/config: '{"gatewayTopology" : { "forwardClientCertDetails": "SANITIZE_SET"
      } }'
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
    operator.kyma-project.io/watcher-gateway: default
  name: klm-watcher-gateway
  namespace: kcp-system
spec:
  selector:
    istio: ingressgateway
  servers:
  - hosts:
    - listener.cp.kyma.cloud.sap
    port:
      name: https
      number: 443
      protocol: HTTPS
    tls:
      credentialName: klm-watcher-root-secret
      mode: MUTUAL
---
apiVersion: operator.kyma-project.io/v1beta2
kind: Watcher
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
    operator.kyma-project.io/managed-by: lifecycle-manager
  name: klm-kyma-watcher
  namespace: kcp-system
spec:
  field: spec
  gateway:
    selector:
      matchLabels:
        operator.kyma-project.io/watcher-gateway: default
  labelsToWatch:
    operator.kyma-project.io/watched-by: lifecycle-manager
  resourceToWatch:
    group: operator.kyma-project.io
    resource: kymas
    version: '*'
  serviceInfo:
    name: klm-event-service
    namespace: kcp-system
    port: 8082
---
apiVersion: security.istio.io/v1beta1
kind: AuthorizationPolicy
metadata:
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-controller-manager
  namespace: kcp-system
spec:
  action: ALLOW
  rules:
  - to:
    - operation:
        paths:
        - /metrics
        - /v1*
        - /convert*
        - /validate*
        - /mutate*
  selector:
    matchLabels:
      app.kubernetes.io/component: lifecycle-manager.kyma-project.io
      app.kubernetes.io/created-by: argo-cd
      app.kubernetes.io/instance: kcp-lifecycle-manager
      app.kubernetes.io/managed-by: kustomize
      app.kubernetes.io/name: lifecycle-manager
      app.kubernetes.io/part-of: kcp
---
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  annotations:
    cert-manager.io/inject-ca-from: kcp-system/klm-serving-cert
  labels:
    app.kubernetes.io/created-by: argo-cd
    app.kubernetes.io/instance: kcp-lifecycle-manager
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: lifecycle-manager
    app.kubernetes.io/part-of: kcp
  name: klm-validating-webhook-configuration
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: klm-webhook-service
      namespace: kcp-system
      path: /validate-operator-kyma-project-io-v1beta2-moduletemplate
  failurePolicy: Fail
  name: v1beta2.vmoduletemplate.kb.io
  rules:
  - apiGroups:
    - operator.kyma-project.io
    apiVersions:
    - v1beta2
    operations:
    - CREATE
    - UPDATE
    resources:
    - moduletemplates
  sideEffects: None
